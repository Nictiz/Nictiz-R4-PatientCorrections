<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="dwv-PatientCorrectionsTask" />
  <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-category">
    <valueString value="Base.Workflow" />
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-security-category">
    <valueCode value="not-classified" />
  </extension>
  <url value="http://nictiz.nl/fhir/StructureDefinition/dwv-PatientCorrectionsTask" />
  <version value="0.1.0" />
  <name value="DwvPatientCorrectionsTask" />
  <title value="dwv PatientCorrectionsTask" />
  <status value="draft" />
  <publisher value="Nictiz" />
  <contact>
    <name value="Nictiz" />
    <telecom>
      <system value="email" />
      <value value="info@nictiz.nl" />
      <use value="work" />
    </telecom>
  </contact>
  <description value="A Communication resource as used within the Patient Corrections (Dutch: Dossierwijzigingsverzoek) information standard. *NOTE*: this profile is inspired by the https://hl7.org/fhir/uv/fhir-patient-correction/StructureDefinition/patient-correction-task profile version 0.4.5 and tries to mimic it as closely as possible. However, different choices have been made on several key points in order to align with other FHIR materials in the Dutch realm. Therefore, this is not a derived profile. This profile is based on FHIR version 4.0.1, which was the latest R4 version at the moment of creation." />
  <copyright value="Copyright and related rights waived via CC0, https://creativecommons.org/publicdomain/zero/1.0/. This does not apply to information from third parties, for example a medical terminology system. The implementer alone is responsible for identifying and obtaining any necessary licenses or authorizations to utilize third party IP in connection with the specification or otherwise." />
  <fhirVersion value="4.0.1" />
  <mapping>
    <identity value="workflow" />
    <uri value="http://hl7.org/fhir/workflow" />
    <name value="Workflow Pattern" />
  </mapping>
  <mapping>
    <identity value="rim" />
    <uri value="http://hl7.org/v3" />
    <name value="RIM Mapping" />
  </mapping>
  <mapping>
    <identity value="w5" />
    <uri value="http://hl7.org/fhir/fivews" />
    <name value="FiveWs Pattern Mapping" />
  </mapping>
  <mapping>
    <identity value="v2" />
    <uri value="http://hl7.org/v2" />
    <name value="HL7 v2 Mapping" />
  </mapping>
  <mapping>
    <identity value="art-decor-dossierwijzigingsverzoek" />
    <uri value="https://decor.nictiz.nl/art-decor/decor-datasets--dwv-?id=2.16.840.1.113883.2.4.3.11.60.130.1.1&amp;effectiveDate=2021-11-17T16%3A56%3A44" />
    <name value="ART-DECOR Dataset Dossierwijzigingsverzoek" />
  </mapping>
  <kind value="resource" />
  <abstract value="false" />
  <type value="Task" />
  <baseDefinition value="http://hl7.org/fhir/StructureDefinition/Task" />
  <derivation value="constraint" />
  <differential>
    <element id="Task.identifier">
      <path value="Task.identifier" />
      <short value="A business identifier for the correction process." />
      <min value="1" />
      <mustSupport value="false" />
      <mapping>
        <identity value="art-decor-dossierwijzigingsverzoek" />
        <map value="dwv-dataelement-63" />
      </mapping>
    </element>
    <element id="Task.status">
      <path value="Task.status" />
      <short value="The current status of the Correction Request or Log Disagreement process.  The status, in conjunction with the business status, can be used to determine the state of the process." />
      <mustSupport value="false" />
      <binding>
        <strength value="required" />
        <valueSet value="http://hl7.org/fhir/ValueSet/task-status" />
      </binding>
      <mapping>
        <identity value="art-decor-dossierwijzigingsverzoek" />
        <map value="dwv-dataelement-64" />
      </mapping>
    </element>
    <element id="Task.statusReason">
      <path value="Task.statusReason" />
      <short value="The reason for the correction request status. Codes to identify the reason for current status. These will typically be specific to a particular workflow." />
      <mapping>
        <identity value="art-decor-dossierwijzigingsverzoek" />
        <map value="dwv-dataelement-65" />
      </mapping>
    </element>
    <element id="Task.businessStatus">
      <path value="Task.businessStatus" />
      <short value="The business status of the request for correction process or the log disagreement process. The domain-specific business-contextual sub-state of the task. For example:  Waiting on additional information from requester, Waiting on additional information from fulfiller (could be a specific party on the fulfiller side) , more time needed to review request, an amendment will be made to the record, an amendment has been made to the record, current record determined accurate and will not be amended, a partial amendment will be made to the record, a partial amendment has been made to the record, disagreement has been reviewed and  attached to the record, disagreement has been rebutted." />
      <mustSupport value="false" />
    </element>
    <element id="Task.intent">
      <path value="Task.intent" />
      <fixedCode value="order" />
      <mapping>
        <identity value="art-decor-dossierwijzigingsverzoek" />
        <map value="dwv-dataelement-66" />
      </mapping>
    </element>
    <element id="Task.code">
      <path value="Task.code" />
      <short value="Code and code.text to represent patient correction, or Code and code.text to represent a disagreement." />
      <min value="1" />
      <mustSupport value="false" />
      <binding>
        <strength value="required" />
        <valueSet value="https://hl7.org/fhir/uv/fhir-patient-correction/ValueSet/PatientCorrectionTaskTypesVS" />
      </binding>
      <mapping>
        <identity value="art-decor-dossierwijzigingsverzoek" />
        <map value="dwv-dataelement-67" />
      </mapping>
    </element>
    <element id="Task.for">
      <path value="Task.for" />
      <short value="The patient whose record this correction references. If request received through Communication resource, must be populated with the value of Communication.subject from the original request for correction Communication resource or log disagreement Communication resource." />
      <min value="1" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Patient" />
        <targetProfile value="http://nictiz.nl/fhir/StructureDefinition/nl-core-Patient" />
      </type>
      <mustSupport value="false" />
      <mapping>
        <identity value="art-decor-dossierwijzigingsverzoek" />
        <map value="dwv-dataelement-68" />
      </mapping>
    </element>
    <element id="Task.executionPeriod">
      <path value="Task.executionPeriod" />
      <short value="ExecutionPeriod.end can be used by the Fulfiller to represent when the request is completed." />
    </element>
    <element id="Task.authoredOn">
      <path value="Task.authoredOn" />
      <short value="The date/time that the original request was received by the Fulfiller, kicking off the request for correction or log disagreement process. If the request was received within the payload of a Communication resource, it should match Communication.sent from the original request Communication resource." />
      <min value="1" />
      <mustSupport value="false" />
      <mapping>
        <identity value="art-decor-dossierwijzigingsverzoek" />
        <map value="dwv-dataelement-69" />
      </mapping>
    </element>
    <element id="Task.lastModified">
      <path value="Task.lastModified" />
      <short value="Indicates the most recent modification date/time on the correction process â€“ usually would change in conjunction with a status or businessStatus change.  Useful when doing historical version searches as well. lastModified when status = completed gives the process completion date/time." />
      <mustSupport value="false" />
    </element>
    <element id="Task.requester">
      <path value="Task.requester" />
      <short value="The entity that is requesting the correction or logging the disagreement such as the patient themselves or their caregiver." />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Patient" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/RelatedPerson" />
        <targetProfile value="http://nictiz.nl/fhir/StructureDefinition/nl-core-Patient" />
        <targetProfile value="http://nictiz.nl/fhir/StructureDefinition/nl-core-ContactPerson" />
      </type>
      <mustSupport value="false" />
      <mapping>
        <identity value="art-decor-dossierwijzigingsverzoek" />
        <map value="dwv-dataelement-70" />
      </mapping>
    </element>
    <element id="Task.owner">
      <path value="Task.owner" />
      <slicing>
        <discriminator>
          <type value="profile" />
          <path value="resolve()" />
        </discriminator>
        <rules value="open" />
      </slicing>
      <short value="The entity that is responsibility for fulfilling the request. Initially, this could be populated from Communication.recipient on the Communication resource of the initial request.  TheFulfiller can then refine to a specific individual, group, role, or department.  For example, a medical records staff person." />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Practitioner" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/PractitionerRole" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Organization" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/CareTeam" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/HealthcareService" />
      </type>
      <mustSupport value="false" />
      <mapping>
        <identity value="art-decor-dossierwijzigingsverzoek" />
        <map value="dwv-dataelement-71" />
      </mapping>
    </element>
    <element id="Task.owner:healthcareProvider">
      <path value="Task.owner" />
      <sliceName value="healthcareProvider" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://nictiz.nl/fhir/StructureDefinition/nl-core-HealthcareProvider-Organization" />
      </type>
    </element>
    <element id="Task.owner:healthProfessional">
      <path value="Task.owner" />
      <sliceName value="healthProfessional" />
      <type>
        <code value="Reference" />
        <profile value="http://nictiz.nl/fhir/StructureDefinition/pattern-ZibHealthProfessionalReference" />
        <targetProfile value="http://nictiz.nl/fhir/StructureDefinition/nl-core-HealthProfessional-PractitionerRole" />
      </type>
    </element>
    <element id="Task.reasonCode">
      <path value="Task.reasonCode" />
      <short value="Why task is needed.  E.g. Need record correct prior to upcoming surgery." />
    </element>
    <element id="Task.reasonReference">
      <path value="Task.reasonReference" />
      <short value="Used on Log Disagreement Task to point to the original Request for Correction Task." />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/uv/patient-corrections/StructureDefinition/patient-correction-task" />
      </type>
      <constraint>
        <key value="task-reasonreference" />
        <severity value="error" />
        <human value="If Task.code indicates this is a Disagreement Task, this field SHALL reference the original Request for Correction Communication." />
        <source value="http://hl7.org/fhir/uv/patient-corrections/StructureDefinition/patient-correction-task" />
      </constraint>
    </element>
    <element id="Task.input">
      <path value="Task.input" />
      <constraint>
        <key value="task-input" />
        <severity value="error" />
        <human value="Task.input SHALL only be populated or updated by the CorrectionRequestor." />
        <source value="http://hl7.org/fhir/uv/patient-corrections/StructureDefinition/patient-correction-task" />
      </constraint>
      <mapping>
        <identity value="art-decor-dossierwijzigingsverzoek" />
        <map value="dwv-dataelement-72" />
      </mapping>
    </element>
    <element id="Task.input.type">
      <path value="Task.input.type" />
      <short value="Label for input" />
      <binding>
        <strength value="required" />
        <valueSet value="https://hl7.org/fhir/uv/fhir-patient-correction/ValueSet/PatientCorrectionTaskTypesVS" />
      </binding>
    </element>
    <element id="Task.input.value[x]">
      <path value="Task.input.value[x]" />
      <type>
        <code value="string" />
      </type>
      <type>
        <code value="Attachment" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://nictiz.nl/fhir/StructureDefinition/dwv-PatientCorrectionsCommunication" />
      </type>
    </element>
    <element id="Task.output">
      <path value="Task.output" />
      <short value="Formal Response from Fulfiller to the Correction Request or to the Disagreement to Correction Denial." />
      <constraint>
        <key value="task-output1" />
        <severity value="error" />
        <human value="Task.output SHALL only be populated or updated by the CorrectionFulfiller." />
        <source value="http://hl7.org/fhir/uv/patient-corrections/StructureDefinition/patient-correction-task" />
      </constraint>
      <constraint>
        <key value="task-output2" />
        <severity value="error" />
        <human value="If Task.code indicates this is a Request for Correction Task, this field SHALL contain the formal response to the request (acceptance, denial, partial acceptance/denial)." />
        <source value="http://hl7.org/fhir/uv/patient-corrections/StructureDefinition/patient-correction-task" />
      </constraint>
      <constraint>
        <key value="task-output3" />
        <severity value="error" />
        <human value="If Task.code indicates this is a Disagreement Task, this field SHALL contain the formal response to the disagreement and optionally a rebuttal." />
        <source value="http://hl7.org/fhir/uv/patient-corrections/StructureDefinition/patient-correction-task" />
      </constraint>
    </element>
    <element id="Task.output.type">
      <path value="Task.output.type" />
      <binding>
        <strength value="required" />
        <valueSet value="https://hl7.org/fhir/uv/fhir-patient-correction/ValueSet/PatientCorrectionOutputTypesVS" />
      </binding>
    </element>
    <element id="Task.output.value[x]">
      <path value="Task.output.value[x]" />
      <type>
        <code value="string" />
      </type>
      <type>
        <code value="Attachment" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://nictiz.nl/fhir/StructureDefinition/dwv-PatientCorrectionsCommunication" />
      </type>
    </element>
  </differential>
</StructureDefinition>